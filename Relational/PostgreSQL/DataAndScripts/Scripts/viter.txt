CREATE TABLE PaymentMethod (paymentMethodID uuid NOT NULL, method varchar(50) NOT NULL, properties varchar(50) NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (paymentMethodID));
CREATE TABLE Trip (tripID uuid NOT NULL, userID uuid NOT NULL, vehicleID uuid NOT NULL, locationID uuid NOT NULL, costPerMinute numeric(10, 2) NOT NULL, totalCost numeric(19, 2), image bytea, startDate timestamp NOT NULL, startLatitude numeric(15, 10) NOT NULL, startLongitude numeric(15, 10) NOT NULL, endDate timestamp, endLatitude numeric(15, 10), endLongitude numeric(15, 10), creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (tripID));
CREATE TABLE Incident (IncidentID uuid NOT NULL, tripID uuid NOT NULL, title varchar(50) NOT NULL, details text NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (IncidentID));
CREATE TABLE Location (locationID uuid NOT NULL, country varchar(50) NOT NULL, city varchar(50) NOT NULL, state varchar(50), zone varchar(40) NOT NULL, latitude numeric(15, 10) NOT NULL, longitude numeric(15, 10) NOT NULL, radious int8 NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (locationID));
CREATE TABLE Vehicle (vehicleID uuid NOT NULL, vehicleTypeID uuid NOT NULL, locationID uuid NOT NULL, serialNumber varchar(50) NOT NULL UNIQUE, cost numeric(10, 2) NOT NULL, "date" timestamp NOT NULL, lastLatitude numeric(15, 10) NOT NULL, lastLongitude numeric(15, 10) NOT NULL, isCharging bool NOT NULL, modelYear int4 NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (vehicleID));
CREATE TABLE VehicleType (vehicleTypeID uuid NOT NULL, type varchar(25) NOT NULL, details text NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (vehicleTypeID));
CREATE TABLE UserPaymentMethod (userPaymentMethodID uuid NOT NULL, userID uuid NOT NULL, paymentMethodID uuid NOT NULL, accountNumber varchar(50) NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (userPaymentMethodID));
CREATE TABLE Payment (paymentID uuid NOT NULL, userPaymentMethodID uuid NOT NULL, tripID uuid NOT NULL, ammount numeric(19, 2) NOT NULL, paymentDate timestamp NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (paymentID));
CREATE TABLE CustomerDetails (customerDetailsID uuid NOT NULL, userID uuid NOT NULL, adress varchar(40) NOT NULL, firstName varchar(40) NOT NULL, lastName varchar(40) NOT NULL, country varchar(40) NOT NULL, city varchar(50) NOT NULL, state varchar(50), postalCode varchar(40) NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (customerDetailsID));
CREATE TABLE TripLocation (tripLocationID uuid NOT NULL, tripID uuid NOT NULL, latitude numeric(15, 10) NOT NULL, longitude numeric(15, 10) NOT NULL, "date" timestamp NOT NULL, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (tripLocationID));
CREATE TABLE "User" (userID uuid NOT NULL, email varchar(50) NOT NULL UNIQUE, password varchar(40) NOT NULL, phone varchar(30), creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (userID));
CREATE TABLE FeedBack (FeedbackID uuid NOT NULL, ttripID uuid NOT NULL, title varchar(50) NOT NULL, details text, creationDate timestamp NOT NULL, updateDate timestamp, PRIMARY KEY (FeedbackID));
ALTER TABLE FeedBack ADD CONSTRAINT FKFeedBack918082 FOREIGN KEY (ttripID) REFERENCES Trip (tripID);
ALTER TABLE Incident ADD CONSTRAINT FKIncident690929 FOREIGN KEY (tripID) REFERENCES Trip (tripID);
ALTER TABLE Trip ADD CONSTRAINT FKTrip802182 FOREIGN KEY (userID) REFERENCES "User" (userID);
ALTER TABLE CustomerDetails ADD CONSTRAINT FKCustomerDe351982 FOREIGN KEY (userID) REFERENCES "User" (userID);
ALTER TABLE TripLocation ADD CONSTRAINT FKTripLocati126534 FOREIGN KEY (tripID) REFERENCES Trip (tripID);
ALTER TABLE Trip ADD CONSTRAINT FKTrip936007 FOREIGN KEY (vehicleID) REFERENCES Vehicle (vehicleID);
ALTER TABLE Vehicle ADD CONSTRAINT FKVehicle693289 FOREIGN KEY (vehicleTypeID) REFERENCES VehicleType (vehicleTypeID);
ALTER TABLE Vehicle ADD CONSTRAINT FKVehicle852668 FOREIGN KEY (locationID) REFERENCES Location (locationID);
ALTER TABLE Payment ADD CONSTRAINT FKPayment346279 FOREIGN KEY (tripID) REFERENCES Trip (tripID);
ALTER TABLE Trip ADD CONSTRAINT FKTrip9967 FOREIGN KEY (locationID) REFERENCES Location (locationID);
ALTER TABLE UserPaymentMethod ADD CONSTRAINT FKUserPaymen447054 FOREIGN KEY (paymentMethodID) REFERENCES PaymentMethod (paymentMethodID);
ALTER TABLE Payment ADD CONSTRAINT FKPayment486990 FOREIGN KEY (userPaymentMethodID) REFERENCES UserPaymentMethod (userPaymentMethodID);
ALTER TABLE UserPaymentMethod ADD CONSTRAINT FKUserPaymen265851 FOREIGN KEY (userID) REFERENCES "User" (userID);
